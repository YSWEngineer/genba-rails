# 万物がオブジェクト
- Ruby や Ruby on Rails を理解する上で、いちばんの基礎となるのが「オブジェクト」という概念です。
- 「オブジェクト」とは、簡単に言うと「モノ」のようなものです。
- Ruby の世界には、大小のオブジェクトが関わり合いながら存在しています。
    - 別の言い方をすると、Ruby は「オブジェクトを作ったり使ったりすることで、コンピューターにプログラマの望んだ仕事(処理)を行わせる言語」です。
- Ruby の世界の中の「オブジェクト」と見分けて、どのオブジェクトがどんな仕事を担当するのかをイメージできるようになることが大切です。
- Ruby on Rails と使って Webアプリケーションを書くということは、Rails の用意したフレームワークを理解して、その上でプログラムを書くということでもあります。


# irb
- Ruby には、irb (アイアールビー)という、対話的な実行環境が付属しています。


# 文字列
- Webアプリケーションにおいてもっとも基本的なオブジェクトの一つが「文字列」です。
- 文字列とは、「氏名」「酒類の購入には年齢記入が必要です」といった、人間が読むことのできる文字や記号で構成された単語や文章のようなデータのことを指します。
- 文字列オブジェクトを作る一番簡単な方法は、ダブルクォーテーション(”)で内容を囲むことです。たとえば、`”氏名”`のように書きます。
- 文字列オブジェクトを作るためには、シングルクォーテーション(’)を使うこともできます。


# 数値
- プログラムを作る上では、数値も重要です。
- 数値とは、 1 や 100 のように、数を表すオブジェクトです。
- Ruby では数値もオブジェクトに含まれます。


# オブジェクトに、自分が何者かを聞いてみる
- 全てのオブジェクトには、自分の型を持っていて、この型のことを「クラス」と呼びます。
- クラスを尋ねるには、オブジェクトの後に `.class` という記述をします。

```bash
irb(main):001:0> "氏名".class
=> String # String(文字列)
```

```bash
irb(main):002:0> 1.class
=> Integer # Integer(整数)
```

- オブジェクトは全てが object_id という固有の番号を持っています。
    
```bash
irb(main):001:0> "氏名".object_id
=> 11300
irb(main):002:0> 1.object_id
=> 3
irb(main):003:0> "氏名".object_id
=> 27880
irb(main):004:0> 1.object_id
=> 3
```
    
- “氏名” という Rubyコードに対応して用意される文字列オブジェクトは、Rubyコードが実行されるたびに、別のオブジェクトが作られる。
- 1というRubyコードに対応して用意される数値オブジェクトは、何回 1 というRubyコードを実行しても、同じ数値オブジェクトが提供される。


# クラスとインスタンス
- Rubyのようなオブジェクト指向言語では、一般的に「オブジェクト X のクラスが A であるとき、X は A のインスタンス(オブジェクト)である」といいます。
- インスタンスオブジェクトは「インスタンス」、「オブジェクト」と呼ばれることもありますが、オブジェクトそのもの、という意味で使われます。


# オブジェクトの機能はクラスで決まる
- オブジェクトにどんな仕事をさせることができるのかは、そのオブジェクトがどんなクラスのオブジェクトであるかによります。
- オブジェクトの機能はクラスによって異なるので、Ruby でプログラムを作るためには、どんなクラスのオブジェクトにどんな機能があるのかを知り、目的にあったクラスのオブジェクトを使うことが大切になってきます。


# 変数
- 変数は、何かのオブジェクトを指し示すことができる、ラベルのような存在です。変数にわかりやすい名前を付けて使うことで、プログラムを格段にわかりやすくすることができます。
- 変数を通じてオブジェクトを参照できるようにすることを「代入する」と呼びます。代入するには、= を使います。
- Ruby のローカル変数の名前は、アルファベットの小文字かアンダースコア( _ )で始めます。2 文字目以降には、大文字や数字も利用できます。慣習としては、単語の区切りにアンダースコア( _ )を使うスネークケースという記法で変数の名前を付けることが好まれています。


| よく見かける記法 | 文法的にはあっているが、一般的でない記法 | ローカル変数として解析できない記法 |
| --- | --- | --- |
| sample_message | sampleMessage (キャメルケース) | SampleMessage |
| part2 | パート2 | 2part |
| _user | _USER | -user |

- なお、アルファベットの大文字から始まる名前は、保持する値が不変の「定数」と解釈されます。厳密には、Ruby の定数の値は絶対に変更できないわけでなく、warningメッセージが出力されるものの、再定義することも可能となっています。


# コメント
- Ruby のプログラムの中に、任意のコメントを記述することができます。コメントは、ソースコードの内容を補完するドキュメンテーションなどの用途で便利に利用できます。
- いくつか書き方はありますが、基本的なのが # のあとにコメントを記述する方法です。


# メソッド
- オブジェクトの代表的な仕事は、何らかの振る舞いをすることです。Ruby のオブジェクトの振る舞いは、基本的に「メソッド」として記述します。
    - メソッドには「(〜を)…します」というような内容を記述することになります。

```ruby
タマ.追いかける(ネズミ) 
# 「追いかける」がメソッドに相当します。
# インスタンスに対して呼び出せるメソッドをインスタンスメソッドと呼びます。
```

- インスタンスに対して呼び出せるメソッドをインスタンスメソッドと呼びます。

```ruby
class 猫
  def 追いかける(ネズミ)
	puts "一生懸命 #{ネズミ} を追いかけた..." # 画面にメッセージを出力します。
  end
end

タマ = 猫.new
# 「追いかける」の部分がメソッド、(ネズミ)の部分がメソッドに対して補足的な情報を与える「引数」と呼ばれるものになります。
```

- 「追いかける」の部分がメソッド、(ネズミ)の部分がメソッドに対して補足的な情報を与える「引数」と呼ばれるものになります。
- オブジェクトにドット( . )を付け、その後にメソッドの名前を記述することでメソッドを呼び出すことができます。

```ruby
# フォームから入力されたデータが変数に入っている状態を作ります。
message = '先ほど注文した商品を全て一旦キャンセルさせてください'

# エラーメッセージの表示を行います。
if message.length > 100
  puts 'メッセージは100文字以下で入力してください。'
end
```

- 先の lengthメソッドの呼び出し例では、message がレシーバとなっています。
- Stringクラスのオブジェクトには、 concat という、**自分に別の文字列オブジェクトを結合させるメソッド**があります。

```ruby
irb(main):005:0> message1 = "こんにちは。"
=> "こんにちは。"
irb(main):006:0> message2 = "こんばんは。"
=> "こんばんは。"
irb(main):007:0> message1.concat(message2)
=> "こんにちは。こんばんは。"
irb(main):008:0> message1
=> "こんにちは。こんばんは。"
irb(main):009:0> message2
=> "こんばんは。"
```

- concatメソッドは 2 つ以上のオブジェクトを同時に結合することができます。2 つ以上のオブジェクトを同時に結合したいときは、結合したいオブジェクトを全てをメソッドに引数として渡します。メソッドに渡すオブジェクトは、引数ごとにカンマ( , )で区切ります。

```ruby
irb(main):011:0> message1 = "おはようございます。"
=> "おはようございます。"
irb(main):012:0> message2 = "こんにちは。"
=> "こんにちは。"
irb(main):013:0> message3 = "こんばんは。"
=> "こんばんは。"
irb(main):014:0> message1.concat(message2, message3)
=> "おはようございます。こんにちは。こんばんは。"
```

- 引数を付けるメソッドには必ず括弧を付けていました。しかし、実は**括弧を省略してメソッド呼び出しを書く**こともできます。括弧を省略する時は、メソッド名と引数の間に半角スペースを入れます。

```ruby
irb(main):015:0> message1 = "おはようございます。"
=> "おはようございます。"
irb(main):016:0> message2 = "こんにちは。"
=> "こんにちは。"
irb(main):017:0> message3 = "こんばんは。"
=> "こんばんは。"
irb(main):018:0> message1.concat message2,message3
=> "おはようございます。こんにちは。こんばんは。"
```

- 括弧を省略しない書き方、省略した書き方、どちらの書き方も実際のコードを読んでいて見掛けることがあります。慣れるまでは大変かもしれませんが、どちらの書き方も知っておくと便利です。
    - なお、引数を渡す必要がないメソッドを length( ) のように空の括弧に付けて呼び出すこともできますが、Rubyプログラマの間では、length のように括弧を付けない書き方が主流と言えそうです。
